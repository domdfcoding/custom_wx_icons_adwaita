language: python
dist: xenial
cache: pip
python:
  - '3.6'
  - '3.7'
  - '3.8'

install:

  - pip install pip lxml scour dummy_wx --upgrade
  - pip install -r requirements.txt
  - pip install tox tox-travis


script:
  - tox


stages:
  - test
  - deploy_pypi

jobs:
  include:
    - stage: deploy_pypi
      python: "3.6"
      script:
        - tox -e icons,build
      deploy:
        on:
          tags: true
          repo: domdfcoding/custom_wx_icons_adwaita
        provider: pypi
        user: "DomDF"
        password:
          secure: tUMEzonlV3Gg03HnsCxH/STRfjY10ElIRh5++L/gibI6PLBNWApICzj2WCn3YLQbzgD0pmxMJjQYe/mAnnMt78gQ7aCew5CcrRrbkzDq0XO7zqV4WHW+vchqkp5lHrd7f7gvFmDOqtemOraQ9niet7PUBfOF3J/QLKKSTDyZvHwoMZ9zJlKU3uyEzxDh6Y9X02dCpaHHFw4MU4ppc8SwabyNfZiz/3nn+7pBc8OA+todf3pdjR7QP6p6lHRUDXPVq/XEf2DCtb6i4cHkncLcIVX1tpUwGG5MZXqYuFZoGf287ShRduESVJN0aRc9Db8rACT+pa5tQw/h0q5D3RdW8XPPY5rb86vEeAAjPKxCMd6JqQ6d49vutJONw7zX0u3MuGzxT+5FyMRamKwa+7/ic3ZtUs29ZXuABhCtYVkhKneS6hjWuR/5zawiz0i6rSF3C3CokYIwGqYkLEL2qqVXf5gVkmNGIEyQ+GdliXEEK5WBBhQgDZpt0Fg8vj1lEIQqRbMcEn3+fqGjil6mTPxReLLTPCFQEBgl8ghhpxr1sSXOfc3dpaycKYy8jwJrN5mymVV9W9s7CDi0q+DR4tGvdSZmufEbHyNocD8mroaycoMjmm0Gm466SdS7ZoCIxSBhidcr4mlmsv/BiIBYO1DyY10nEWOt6RVHX0iJiAELEA0=
        distributions: "sdist bdist_wheel"
        skip_existing: true
